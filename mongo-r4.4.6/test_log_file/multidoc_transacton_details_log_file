
1. sesssion创建，获取库表对应打印如下：
session = db.getMongo().startSession( { readPreference: { mode: "primary" } } );
coll1 = session.getDatabase("mydb1").foo;
coll2 = session.getDatabase("mydb2").bar;


{"t":{"$date":"2021-09-18T10:45:13.626+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933025,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:13.626+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-18T10:45:13.626+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933105,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:13.626+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933025,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:13.626+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9398}}
{"t":{"$date":"2021-09-18T10:45:13.626+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-18T10:45:13.637+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933105,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:13.637+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-18T10:45:13.637+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933105,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:13.637+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933105,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:13.637+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9400}}
{"t":{"$date":"2021-09-18T10:45:13.637+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-18T10:45:14.731+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933105,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:14.731+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-18T10:45:14.731+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933105,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:14.731+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933105,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:14.731+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9415}}
{"t":{"$date":"2021-09-18T10:45:14.731+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}









2. session.startTransaction( { readConcern: { level: "local" }, writeConcern: { w: "majority" } } );对应日志打印如下：

{"t":{"$date":"2021-09-18T10:45:25.919+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933105,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:25.919+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-18T10:45:25.919+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933125,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:25.919+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933105,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:25.919+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9582}}
{"t":{"$date":"2021-09-18T10:45:25.919+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}











3. 写数据对应日志打印
try {
   coll1.insertOne( { abc: 1 } );
   coll2.insertOne( { xyz: 999 } );
} catch (error) {
   // Abort transaction on error
   session.abortTransaction();
   throw error;
}


{"t":{"$date":"2021-09-18T10:45:35.989+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"mydb1","commandArgs":{"insert":"foo","ordered":true,"lsid":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933125,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":0,"startTransaction":true,"readConcern":{"level":"local"},"$db":"mydb1"}}}
{"t":{"$date":"2021-09-18T10:45:35.990+08:00"},"s":"D3", "c":"STORAGE",  "id":22416,   "ctx":"conn7","msg":"setting timestamp read source","attr":{"readSource":"kNoTimestamp","provided":"none"}}
{"t":{"$date":"2021-09-18T10:45:35.990+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"config","commandArgs":{"find":"transactions","filter":{"_id":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}}},"readConcern":{},"ntoreturn":1,"singleBatch":true,"$db":"config"}}}
{"t":{"$date":"2021-09-18T10:45:35.990+08:00"},"s":"D2", "c":"QUERY",    "id":20922,   "ctx":"conn7","msg":"Using idhack: {canonicalQuery_Short}","attr":{"canonicalQuery_Short":"ns: config.transactions query: { _id: { id: UUID(\"ec61b000-18f9-48ac-8eca-888a8e517c32\"), uid: BinData(0, 6399AB0DAC62F20BFC466753B10FB58FB7E692BEC952C69B84D997021794D1F8) } } sort: {} projection: {} ntoreturn=1"}}
{"t":{"$date":"2021-09-18T10:45:35.990+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn7","msg":"WT begin_transaction","attr":{"snapshotId":19911,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-18T10:45:36.001+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn7","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":19912,"transactionTime":11}}
{"t":{"$date":"2021-09-18T10:45:36.001+08:00"},"s":"D3", "c":"STORAGE",  "id":22413,   "ctx":"conn7","msg":"WT rollback_transaction","attr":{"snapshotId":19912}}
{"t":{"$date":"2021-09-18T10:45:36.001+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933135,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:36.001+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"config.transactions","appName":"MongoDB Shell","command":{"find":"transactions","filter":{"_id":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}}},"readConcern":{},"ntoreturn":1,"singleBatch":true,"$db":"config"},"planSummary":"IDHACK","keysExamined":0,"docsExamined":0,"cursorExhausted":true,"numYields":0,"nreturned":0,"reslen":233,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":1}},"Global":{"acquireCount":{"w":1}},"Database":{"acquireCount":{"w":1}},"Collection":{"acquireCount":{"w":1}},"Mutex":{"acquireCount":{"r":1}}},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":4378,"timeReadingMicros":531}},"protocol":"op_msg","durationMillis":11}}
{"t":{"$date":"2021-09-18T10:45:36.001+08:00"},"s":"D1", "c":"COMMAND",  "id":21971,   "ctx":"conn7","msg":"Note: not profiling because we are in DBDirectClient"}
{"t":{"$date":"2021-09-18T10:45:36.001+08:00"},"s":"D3", "c":"STORAGE",  "id":22416,   "ctx":"conn7","msg":"setting timestamp read source","attr":{"readSource":"kNoTimestamp","provided":"none"}}
{"t":{"$date":"2021-09-18T10:45:36.001+08:00"},"s":"D4", "c":"TXN",      "id":23984,   "ctx":"conn7","msg":"New transaction started","attr":{"txnNumber":0,"lsid":{"uuid":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}}}}
{"t":{"$date":"2021-09-18T10:45:36.002+08:00"},"s":"D4", "c":"-",        "id":20519,   "ctx":"conn7","msg":"Taking ticket.","attr":{"Available":999999999}}
{"t":{"$date":"2021-09-18T10:45:36.002+08:00"},"s":"D3", "c":"STORAGE",  "id":22416,   "ctx":"conn7","msg":"setting timestamp read source","attr":{"readSource":"kNoTimestamp","provided":"none"}}
{"t":{"$date":"2021-09-18T10:45:36.002+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn7","msg":"WT begin_transaction","attr":{"snapshotId":19914,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-18T10:45:36.004+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn7","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb1/collection/57--8885603098536360841","sizeInfo_numRecords_load":76,"sizeInfo_dataSize_load":2660,"entry_use_count":3}}
{"t":{"$date":"2021-09-18T10:45:36.006+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933135,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:36.006+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"mydb1.foo","appName":"MongoDB Shell","command":{"insert":"foo","ordered":true,"lsid":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933125,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":0,"startTransaction":true,"readConcern":{"level":"local"},"$db":"mydb1"},"ninserted":1,"keysInserted":1,"numYields":0,"reslen":210,"locks":{},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":4286,"timeReadingMicros":9}},"protocol":"op_msg","durationMillis":16}}
{"t":{"$date":"2021-09-18T10:45:36.006+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn7","msg":"WT begin_transaction","attr":{"snapshotId":19922,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn7","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb1/collection/1--1774489288232282920","sizeInfo_numRecords_load":4,"sizeInfo_dataSize_load":2763,"entry_use_count":3}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn7","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":19923,"transactionTime":1}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D3", "c":"STORAGE",  "id":22412,   "ctx":"conn7","msg":"WT commit_transaction","attr":{"snapshotId":19923}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9735}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-18T10:45:36.008+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"mydb2","commandArgs":{"insert":"bar","ordered":true,"lsid":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933135,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":1,"$db":"mydb2"}}}
{"t":{"$date":"2021-09-18T10:45:36.010+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn7","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb2/collection/61--8885603098536360841","sizeInfo_numRecords_load":75,"sizeInfo_dataSize_load":2625,"entry_use_count":3}}
{"t":{"$date":"2021-09-18T10:45:36.013+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933135,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:36.013+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"mydb2.bar","appName":"MongoDB Shell","command":{"insert":"bar","ordered":true,"lsid":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933135,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":1,"$db":"mydb2"},"ninserted":1,"keysInserted":1,"numYields":0,"reslen":210,"locks":{},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":4229,"timeReadingMicros":9}},"protocol":"op_msg","durationMillis":4}}
{"t":{"$date":"2021-09-18T10:45:36.013+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn7","msg":"WT begin_transaction","attr":{"snapshotId":19928,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn7","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb2/collection/2--1774489288232282920","sizeInfo_numRecords_load":4,"sizeInfo_dataSize_load":2547,"entry_use_count":3}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn7","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":19929,"transactionTime":2}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D3", "c":"STORAGE",  "id":22412,   "ctx":"conn7","msg":"WT commit_transaction","attr":{"snapshotId":19929}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9738}}
{"t":{"$date":"2021-09-18T10:45:36.015+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-18T10:45:36.017+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933135,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:36.017+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-18T10:45:36.017+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933135,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:36.017+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933135,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:36.017+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9739}}
{"t":{"$date":"2021-09-18T10:45:36.017+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}





4. 事务提交对应日志打印：session.commitTransaction();

{"t":{"$date":"2021-09-18T10:45:46.749+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"commitTransaction":1.0,"txnNumber":0,"writeConcern":{"w":"majority"},"lsid":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933135,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"autocommit":false,"stmtId":2,"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:46.749+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"commitTransaction"}}
{"t":{"$date":"2021-09-18T10:45:46.749+08:00"},"s":"D3", "c":"TXN",      "id":20507,   "ctx":"conn7","msg":"Received commitTransaction","attr":{"txnNumber":0,"sessionId":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}}}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22415,   "ctx":"conn7","msg":"WT set timestamp of future write operations to {timestamp}","attr":{"timestamp":{"$timestamp":{"t":1631933146,"i":1}}}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D4", "c":"STORAGE",  "id":22403,   "ctx":"conn7","msg":"inserting record with timestamp {ts}","attr":{"ts":{"$timestamp":{"t":1631933146,"i":1}}}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22415,   "ctx":"conn7","msg":"WT set timestamp of future write operations to {timestamp}","attr":{"timestamp":{"$timestamp":{"t":1631933146,"i":1}}}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn7","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:config/collection/45--8885603098536360841","sizeInfo_numRecords_load":69,"sizeInfo_dataSize_load":11622,"entry_use_count":3}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn7","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":20251,"transactionTime":10748}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22412,   "ctx":"conn7","msg":"WT commit_transaction","attr":{"snapshotId":20251}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onRollback<mongo::repl::LocalOplogInfo::getNextOpTimes(mongo::OperationContext*, unsigned long)::{lambda()#2}>(mongo::repl::LocalOplogInfo::getNextOpTimes(mongo::OperationContext*, unsigned long)::{lambda()#2})::OnRollbackChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::OplogStones::InsertChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocumentsForOplog(mongo::OperationContext*, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::CollectionImpl::insertDocumentsForOplog(mongo::OperationContext*, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::repl::_logOpsInner(mongo::OperationContext*, mongo::NamespaceString const&, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&, mongo::Collection*, mongo::repl::OpTime, mongo::Date_t)::{lambda(boost::optional<mongo::Timestamp>)#3}>(mongo::repl::_logOpsInner(mongo::OperationContext*, mongo::NamespaceString const&, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&, mongo::Collection*, mongo::repl::OpTime, mongo::Date_t)::{lambda(boost::optional<mongo::Timestamp>)#3})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:46.750+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn7","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::TransactionParticipant::Participant::_registerUpdateCacheOnCommit(mongo::OperationContext*, std::vector<int, std::allocator<int> >, mongo::repl::OpTime const&)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::TransactionParticipant::Participant::_registerUpdateCacheOnCommit(mongo::OperationContext*, std::vector<int, std::allocator<int> >, mongo::repl::OpTime const&)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-18T10:45:46.751+08:00"},"s":"I",  "c":"TXN",      "id":51802,   "ctx":"conn7","msg":"transaction","attr":{"parameters":{"lsid":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}},"txnNumber":0,"autocommit":false,"readConcern":{"level":"local"}},"readTimestamp":"Timestamp(0, 0)","ninserted":2,"keysInserted":2,"terminationCause":"committed","timeActiveMicros":9185,"timeInactiveMicros":10739834,"numYields":0,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":4}},"Global":{"acquireCount":{"r":1,"w":2}},"Database":{"acquireCount":{"w":4}},"Collection":{"acquireCount":{"w":4}},"Mutex":{"acquireCount":{"r":4}}},"storage":{"data":{"bytesRead":8515,"timeReadingMicros":18}},"wasPrepared":false,"durationMillis":10749}}
{"t":{"$date":"2021-09-18T10:45:46.751+08:00"},"s":"D2", "c":"REPL",     "id":22549,   "ctx":"conn7","msg":"Waiting for write concern. OpTime: {replOpTime}, write concern: {writeConcern}","attr":{"replOpTime":{"ts":{"$timestamp":{"t":1631933146,"i":1}},"t":47},"writeConcern":{"w":"majority","wtimeout":0}}}
{"t":{"$date":"2021-09-18T10:45:46.751+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn7","msg":"WT begin_transaction","attr":{"snapshotId":20253,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-18T10:45:46.751+08:00"},"s":"D3", "c":"STORAGE",  "id":22413,   "ctx":"conn7","msg":"WT rollback_transaction","attr":{"snapshotId":20254}}
{"t":{"$date":"2021-09-18T10:45:46.751+08:00"},"s":"D2", "c":"STORAGE",  "id":22371,   "ctx":"conn7","msg":"Operation is waiting for an entry to become visible in the oplog.","attr":{"awaitedOplogEntryTimestamp":{"$timestamp":{"t":1631933146,"i":1}},"currentLatestVisibleOplogEntryTimestamp":{"$timestamp":{"t":1631933145,"i":1}}}}
{"t":{"$date":"2021-09-18T10:45:46.751+08:00"},"s":"D2", "c":"STORAGE",  "id":22371,   "ctx":"conn7","msg":"Operation is waiting for an entry to become visible in the oplog.","attr":{"awaitedOplogEntryTimestamp":{"$timestamp":{"t":1631933146,"i":1}},"currentLatestVisibleOplogEntryTimestamp":{"$timestamp":{"t":1631933145,"i":1}}}}
{"t":{"$date":"2021-09-18T10:45:46.756+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933146,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:46.756+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"commitTransaction":1.0,"txnNumber":0,"writeConcern":{"w":"majority"},"lsid":{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933135,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"autocommit":false,"stmtId":2,"$db":"admin"},"numYields":0,"reslen":163,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":2}},"Database":{"acquireCount":{"w":4}},"Collection":{"acquireCount":{"w":4}},"Mutex":{"acquireCount":{"r":4}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":2},"readConcern":{"level":"local"},"writeConcern":{"w":"majority","wtimeout":0},"storage":{},"protocol":"op_msg","durationMillis":6}}
{"t":{"$date":"2021-09-18T10:45:46.756+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9896}}
{"t":{"$date":"2021-09-18T10:45:46.756+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-18T10:45:46.757+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933146,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:46.757+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-18T10:45:46.757+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933146,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:46.758+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933146,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:46.758+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":9898}}
{"t":{"$date":"2021-09-18T10:45:46.758+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}








5. session.endSession(); 对应日志打印：

{"t":{"$date":"2021-09-18T10:45:56.124+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"endSessions":[{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}}],"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:56.124+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933146,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:56.125+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"endSessions":[{"id":{"$uuid":"ec61b000-18f9-48ac-8eca-888a8e517c32"}}],"$db":"admin"},"numYields":0,"reslen":163,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:56.125+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":10036}}
{"t":{"$date":"2021-09-18T10:45:56.125+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-18T10:45:56.126+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn7","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933146,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-18T10:45:56.126+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn7","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-18T10:45:56.126+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn7","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1631933146,"i":1}}}}}
{"t":{"$date":"2021-09-18T10:45:56.126+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn7","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1631933146,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-18T10:45:56.126+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn7","msg":"Received interrupt request for unknown op","attr":{"opId":10037}}
{"t":{"$date":"2021-09-18T10:45:56.126+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn7","msg":"Ops known during interrupt","attr":{"ops":[]}}













































普通查询对应日志：
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn9","msg":"About to run the command","attr":{"db":"test","commandArgs":{"find":"yangyazhou","filter":{},"limit":1.0,"singleBatch":true,"lsid":{"id":{"$uuid":"f8b58f2d-54b3-40b2-aef4-310aea9f3802"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632992510,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$readPreference":{"mode":"secondaryPreferred"},"$db":"test"}}}

下面这几行打印都在AutoGetCollectionForRead::AutoGetCollectionForRead-> opCtx->recoveryUnit()->getPointInTimeReadTimestamp() -> WiredTigerRecoveryUnit::getPointInTimeReadTimestamp() ->WiredTigerRecoveryUnit::getSession()
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D2", "c":"STORAGE",  "id":4452901, "ctx":"conn9","msg":"Changing ReadSource to kLastApplied","attr":{"collection":"test.yangyazhou"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":22416,   "ctx":"conn9","msg":"setting timestamp read source","attr":{"readSource":"kLastApplied","provided":"none"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn9","msg":"WT begin_transaction","attr":{"snapshotId":2233,"readSource":"kLastApplied"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn9","msg":"yang test .......AutoGetCollectionForRead::AutoGetCollectionForRead no conflict"}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D5", "c":"QUERY",    "id":20967,   "ctx":"conn9","msg":"Beginning planning","attr":{"options":"INDEX_INTERSECTION SPLIT_LIMITED_SORT ","query":"ns=test.yangyazhou limit=1Tree: $and\nSort: {}\nProj: {}\n"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D5", "c":"QUERY",    "id":20968,   "ctx":"conn9","msg":"Index number and details","attr":{"indexNumber":0,"index":"kp: { _id: 1 } unique name: '(_id_, )' io: { v: 2, key: { _id: 1 }, name: \"_id_\" }"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D5", "c":"QUERY",    "id":20972,   "ctx":"conn9","msg":"Rated tree","attr":{"tree":"$and\n"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D5", "c":"QUERY",    "id":20979,   "ctx":"conn9","msg":"Planner: outputted indexed solutions","attr":{"numSolutions":0}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D5", "c":"QUERY",    "id":20984,   "ctx":"conn9","msg":"Planner: outputting a collection scan","attr":{"collectionScan":"LIMIT\n---limit = 1\n------fetched = 1\n---sortedByDiskLoc = 0\n---getSort = []\n---Child:\n------COLLSCAN\n---------ns = test.yangyazhou\n---------filter = $and\n---------fetched = 1\n---------sortedByDiskLoc = 0\n---------getSort = []\n"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D2", "c":"QUERY",    "id":20926,   "ctx":"conn9","msg":"Only one plan is available; it will be run but will not be cached","attr":{"query":"ns: test.yangyazhou query: {} sort: {} projection: {} limit: 1","planSummary":"COLLSCAN"}}

下面这行打印在
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":22413,   "ctx":"conn9","msg":"WT rollback_transaction","attr":{"snapshotId":2234}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn9","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632992540,"i":1}}}}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn9","msg":"Slow query","attr":{"type":"command","ns":"test.yangyazhou","appName":"MongoDB Shell","command":{"find":"yangyazhou","filter":{},"limit":1.0,"singleBatch":true,"lsid":{"id":{"$uuid":"f8b58f2d-54b3-40b2-aef4-310aea9f3802"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632992510,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$readPreference":{"mode":"secondaryPreferred"},"$db":"test"},"planSummary":"COLLSCAN","keysExamined":0,"docsExamined":1,"cursorExhausted":true,"numYields":0,"nreturned":1,"reslen":254,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":1}},"Global":{"acquireCount":{"r":1}},"Database":{"acquireCount":{"r":1}},"Collection":{"acquireCount":{"r":1}},"Mutex":{"acquireCount":{"r":1}}},"storage":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn9","msg":"yang test .......CollectionImpl::insertDocuments begin x"}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn9","msg":"yang test .......CollectionImpl::insertDocuments begin xx"}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn9","msg":"WT begin_transaction","attr":{"snapshotId":2236,"readSource":"kLastApplied"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":122416,  "ctx":"conn9","msg":"yang test .......WiredTigerRecordStore::_insertRecords ","attr":{" _uri:":"table:test/collection/2-3034252779939910406"," key:":{"RecordId":22}," value:":{"op":"query","ns":"test.yangyazhou","command":{"find":"yangyazhou","filter":{},"limit":1.0,"singleBatch":true,"lsid":{"id":{"$uuid":"f8b58f2d-54b3-40b2-aef4-310aea9f3802"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632992510,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$readPreference":{"mode":"secondaryPreferred"},"$db":"test"},"keysExamined":0,"docsExamined":1,"cursorExhausted":true,"numYield":0,"nreturned":1,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":2}},"Global":{"acquireCount":{"r":2}},"Database":{"acquireCount":{"r":1}},"Collection":{"acquireCount":{"r":1}},"Mutex":{"acquireCount":{"r":1}}},"flowControl":{},"storage":{},"responseLength":254,"protocol":"op_msg","millis":0,"planSummary":"COLLSCAN","execStats":{"stage":"LIMIT","nReturned":1,"executionTimeMillisEstimate":0,"works":3,"advanced":1,"needTime":1,"needYield":0,"saveState":0,"restoreState":0,"isEOF":1,"limitAmount":1,"inputStage":{"stage":"COLLSCAN","nReturned":1,"executionTimeMillisEstimate":0,"works":2,"advanced":1,"needTime":1,"needYield":0,"saveState":0,"restoreState":0,"isEOF":0,"direction":"forward","docsExamined":1}},"ts":{"$date":"2021-09-30T09:02:28.153Z"},"client":"192.168.153.128","appName":"MongoDB Shell","allUsers":[{"user":"root","db":"admin"}],"user":"root@admin"}}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":122419,  "ctx":"conn9","msg":"yang test .......CollectionImpl::insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":122428,  "ctx":"conn9","msg":"yang test .......CollectionImpl::insertDocuments end"}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":22412,   "ctx":"conn9","msg":"WT commit_transaction","attr":{"snapshotId":2237}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn9","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-30T17:02:28.153+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn9","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-30T17:02:28.154+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn9","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#4}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#4})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T17:02:28.154+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn9","msg":"Received interrupt request for unknown op","attr":{"opId":1539}}
{"t":{"$date":"2021-09-30T17:02:28.154+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn9","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T17:02:28.155+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn9","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632992540,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$readPreference":{"mode":"secondaryPreferred"},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T17:02:28.155+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn9","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T17:02:28.155+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn9","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632992540,"i":1}}}}}
{"t":{"$date":"2021-09-30T17:02:28.155+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn9","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632992540,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$readPreference":{"mode":"secondaryPreferred"},"$db":"admin"},"numYields":0,"reslen":1591,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T17:02:28.155+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn9","msg":"Received interrupt request for unknown op","attr":{"opId":1540}}
{"t":{"$date":"2021-09-30T17:02:28.155+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn9","msg":"Ops known during interrupt","attr":{"ops":[]}}





































跨文档事务：
session = db.getMongo().startSession( { readPreference: { mode: "primary" } } );
coll1 = session.getDatabase("mydb11").foo;
coll2 = session.getDatabase("mydb22").bar;
对应日志如下：

{"t":{"$date":"2021-09-30T11:58:03.787+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974140,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:03.787+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:03.787+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974280,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:03.787+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974140,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:03.787+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":955772}}
{"t":{"$date":"2021-09-30T11:58:03.787+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T11:58:03.804+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974280,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:03.804+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:03.804+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974280,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:03.804+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974280,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:03.804+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":955773}}
{"t":{"$date":"2021-09-30T11:58:03.804+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T11:58:04.619+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974280,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:04.619+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:04.619+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974280,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:04.619+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974280,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:04.619+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":955786}}
{"t":{"$date":"2021-09-30T11:58:04.619+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}







session.startTransaction( { readConcern: { level: "local" }, writeConcern: { w: "majority" } } );
对应日志如下：

{"t":{"$date":"2021-09-30T11:58:16.390+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974280,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:16.391+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:16.391+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974290,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:16.391+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974280,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:16.391+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":955959}}
{"t":{"$date":"2021-09-30T11:58:16.391+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}


try {
   coll1.insertOne( { abc: 221 } );
   coll2.insertOne( { xyz: 92299 } );
} catch (error) {
   // Abort transaction on error
   session.abortTransaction();
   throw error;
}
对应日志如下：

{"t":{"$date":"2021-09-30T11:58:29.765+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"mydb11","commandArgs":{"insert":"foo","ordered":true,"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974290,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":0,"startTransaction":true,"readConcern":{"level":"local"},"$db":"mydb11"}}}
{"t":{"$date":"2021-09-30T11:58:29.766+08:00"},"s":"D3", "c":"STORAGE",  "id":22416,   "ctx":"conn24","msg":"setting timestamp read source","attr":{"readSource":"kNoTimestamp","provided":"none"}}
{"t":{"$date":"2021-09-30T11:58:29.766+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"config","commandArgs":{"find":"transactions","filter":{"_id":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}}},"readConcern":{},"ntoreturn":1,"singleBatch":true,"$db":"config"}}}
{"t":{"$date":"2021-09-30T11:58:29.766+08:00"},"s":"D2", "c":"QUERY",    "id":20922,   "ctx":"conn24","msg":"Using idhack: {canonicalQuery_Short}","attr":{"canonicalQuery_Short":"ns: config.transactions query: { _id: { id: UUID(\"231b1fe8-6961-4589-a60f-f9a5c90b0afc\"), uid: BinData(0, 6399AB0DAC62F20BFC466753B10FB58FB7E692BEC952C69B84D997021794D1F8) } } sort: {} projection: {} ntoreturn=1"}}
{"t":{"$date":"2021-09-30T11:58:29.766+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn24","msg":"WT begin_transaction","attr":{"snapshotId":1952826,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-30T11:58:29.778+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn24","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":1952827,"transactionTime":12}}
{"t":{"$date":"2021-09-30T11:58:29.778+08:00"},"s":"D3", "c":"STORAGE",  "id":22413,   "ctx":"conn24","msg":"WT rollback_transaction","attr":{"snapshotId":1952827}}
{"t":{"$date":"2021-09-30T11:58:29.778+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974300,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:29.778+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"config.transactions","appName":"MongoDB Shell","command":{"find":"transactions","filter":{"_id":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}}},"readConcern":{},"ntoreturn":1,"singleBatch":true,"$db":"config"},"planSummary":"IDHACK","keysExamined":0,"docsExamined":0,"cursorExhausted":true,"numYields":0,"nreturned":0,"reslen":233,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":1}},"Global":{"acquireCount":{"w":1}},"Database":{"acquireCount":{"w":1}},"Collection":{"acquireCount":{"w":1}},"Mutex":{"acquireCount":{"r":1}}},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":4838,"timeReadingMicros":445}},"protocol":"op_msg","durationMillis":12}}
{"t":{"$date":"2021-09-30T11:58:29.778+08:00"},"s":"D1", "c":"COMMAND",  "id":21971,   "ctx":"conn24","msg":"Note: not profiling because we are in DBDirectClient"}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"STORAGE",  "id":22416,   "ctx":"conn24","msg":"setting timestamp read source","attr":{"readSource":"kNoTimestamp","provided":"none"}}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D4", "c":"TXN",      "id":23984,   "ctx":"conn24","msg":"New transaction started","attr":{"txnNumber":0,"lsid":{"uuid":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}}}}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D4", "c":"-",        "id":20519,   "ctx":"conn24","msg":"Taking ticket.","attr":{"Available":1000000000}}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"STORAGE",  "id":22416,   "ctx":"conn24","msg":"setting timestamp read source","attr":{"readSource":"kNoTimestamp","provided":"none"}}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn24","msg":"WT begin_transaction","attr":{"snapshotId":1952829,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"WRITE",    "id":122416,  "ctx":"conn24","msg":"yang test .......insertDocuments begin 1"}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"WRITE",    "id":122416,  "ctx":"conn24","msg":"yang test .......insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"WRITE",    "id":1224116, "ctx":"conn24","msg":"yang test .......insertDocuments begin 3"}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin x"}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin xx"}
{"t":{"$date":"2021-09-30T11:58:29.779+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin"}
{"t":{"$date":"2021-09-30T11:58:29.781+08:00"},"s":"D3", "c":"STORAGE",  "id":122416,  "ctx":"conn24","msg":"yang test .......WiredTigerRecordStore::_insertRecords ","attr":{" _uri:":"table:mydb11/collection/0--6789585938347626304"," key:":{"RecordId":6}," value:":{"_id":{"$oid":"615535e5b670ae379eff3601"},"abc":221.0}}}
{"t":{"$date":"2021-09-30T11:58:29.781+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn24","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb11/collection/0--6789585938347626304","sizeInfo_numRecords_load":4,"sizeInfo_dataSize_load":140,"entry_use_count":3}}
{"t":{"$date":"2021-09-30T11:58:29.783+08:00"},"s":"D3", "c":"STORAGE",  "id":122419,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.783+08:00"},"s":"D3", "c":"STORAGE",  "id":122428,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments end"}
{"t":{"$date":"2021-09-30T11:58:29.783+08:00"},"s":"D3", "c":"WRITE",    "id":122417,  "ctx":"conn24","msg":"yang test .......insertDocuments end 1"}
{"t":{"$date":"2021-09-30T11:58:29.783+08:00"},"s":"D3", "c":"WRITE",    "id":122416,  "ctx":"conn24","msg":"yang test .......insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.783+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974300,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:29.783+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"mydb11.foo","appName":"MongoDB Shell","command":{"insert":"foo","ordered":true,"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974290,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":0,"startTransaction":true,"readConcern":{"level":"local"},"$db":"mydb11"},"ninserted":1,"keysInserted":1,"numYields":0,"reslen":230,"locks":{},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":391,"timeReadingMicros":718}},"protocol":"op_msg","durationMillis":17}}
{"t":{"$date":"2021-09-30T11:58:29.784+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin x"}
{"t":{"$date":"2021-09-30T11:58:29.784+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin xx"}
{"t":{"$date":"2021-09-30T11:58:29.784+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin"}
{"t":{"$date":"2021-09-30T11:58:29.784+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn24","msg":"WT begin_transaction","attr":{"snapshotId":1952831,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D3", "c":"STORAGE",  "id":122416,  "ctx":"conn24","msg":"yang test .......WiredTigerRecordStore::_insertRecords ","attr":{" _uri:":"table:mydb11/collection/2--6789585938347626304"," key:":{"RecordId":9}," value:":{"op":"insert","ns":"mydb11.foo","command":{"insert":"foo","ordered":true,"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974290,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":0,"startTransaction":true,"readConcern":{"level":"local"},"$db":"mydb11"},"ninserted":1,"keysInserted":1,"numYield":0,"locks":{},"flowControl":{},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":391,"timeReadingMicros":718}},"responseLength":230,"protocol":"op_msg","millis":17,"ts":{"$date":"2021-09-30T03:58:29.784Z"},"client":"192.168.153.128","appName":"MongoDB Shell","allUsers":[{"user":"root","db":"admin"}],"user":"root@admin"}}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn24","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb11/collection/2--6789585938347626304","sizeInfo_numRecords_load":9,"sizeInfo_dataSize_load":7439,"entry_use_count":3}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D3", "c":"STORAGE",  "id":122419,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D3", "c":"STORAGE",  "id":122428,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments end"}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn24","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":1952832,"transactionTime":2}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D3", "c":"STORAGE",  "id":22412,   "ctx":"conn24","msg":"WT commit_transaction","attr":{"snapshotId":1952832}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956155}}
{"t":{"$date":"2021-09-30T11:58:29.786+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T11:58:29.787+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"mydb22","commandArgs":{"insert":"bar","ordered":true,"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974300,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":1,"$db":"mydb22"}}}
{"t":{"$date":"2021-09-30T11:58:29.787+08:00"},"s":"D3", "c":"WRITE",    "id":122416,  "ctx":"conn24","msg":"yang test .......insertDocuments begin 1"}
{"t":{"$date":"2021-09-30T11:58:29.787+08:00"},"s":"D3", "c":"WRITE",    "id":122416,  "ctx":"conn24","msg":"yang test .......insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.787+08:00"},"s":"D3", "c":"WRITE",    "id":1224116, "ctx":"conn24","msg":"yang test .......insertDocuments begin 3"}
{"t":{"$date":"2021-09-30T11:58:29.787+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin x"}
{"t":{"$date":"2021-09-30T11:58:29.787+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin xx"}
{"t":{"$date":"2021-09-30T11:58:29.787+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin"}
{"t":{"$date":"2021-09-30T11:58:29.789+08:00"},"s":"D3", "c":"STORAGE",  "id":122416,  "ctx":"conn24","msg":"yang test .......WiredTigerRecordStore::_insertRecords ","attr":{" _uri:":"table:mydb22/collection/3--6789585938347626304"," key:":{"RecordId":6}," value:":{"_id":{"$oid":"615535e5b670ae379eff3602"},"xyz":92299.0}}}
{"t":{"$date":"2021-09-30T11:58:29.789+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn24","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb22/collection/3--6789585938347626304","sizeInfo_numRecords_load":4,"sizeInfo_dataSize_load":140,"entry_use_count":3}}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"STORAGE",  "id":122419,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"STORAGE",  "id":122428,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments end"}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"WRITE",    "id":122417,  "ctx":"conn24","msg":"yang test .......insertDocuments end 1"}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"WRITE",    "id":122416,  "ctx":"conn24","msg":"yang test .......insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974300,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"mydb22.bar","appName":"MongoDB Shell","command":{"insert":"bar","ordered":true,"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974300,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":1,"$db":"mydb22"},"ninserted":1,"keysInserted":1,"numYields":0,"reslen":230,"locks":{},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":391,"timeReadingMicros":496}},"protocol":"op_msg","durationMillis":4}}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin x"}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin xx"}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin"}
{"t":{"$date":"2021-09-30T11:58:29.791+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn24","msg":"WT begin_transaction","attr":{"snapshotId":1952837,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D3", "c":"STORAGE",  "id":122416,  "ctx":"conn24","msg":"yang test .......WiredTigerRecordStore::_insertRecords ","attr":{" _uri:":"table:mydb22/collection/5--6789585938347626304"," key:":{"RecordId":9}," value:":{"op":"insert","ns":"mydb22.bar","command":{"insert":"bar","ordered":true,"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974300,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"txnNumber":0,"autocommit":false,"stmtId":1,"$db":"mydb22"},"ninserted":1,"keysInserted":1,"numYield":0,"locks":{},"flowControl":{},"readConcern":{"level":"local"},"storage":{"data":{"bytesRead":391,"timeReadingMicros":496}},"responseLength":230,"protocol":"op_msg","millis":4,"ts":{"$date":"2021-09-30T03:58:29.791Z"},"client":"192.168.153.128","appName":"MongoDB Shell","allUsers":[{"user":"root","db":"admin"}],"user":"root@admin"}}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn24","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:mydb22/collection/5--6789585938347626304","sizeInfo_numRecords_load":9,"sizeInfo_dataSize_load":7223,"entry_use_count":3}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D3", "c":"STORAGE",  "id":122419,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D3", "c":"STORAGE",  "id":122428,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments end"}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn24","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":1952838,"transactionTime":2}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D3", "c":"STORAGE",  "id":22412,   "ctx":"conn24","msg":"WT commit_transaction","attr":{"snapshotId":1952838}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956156}}
{"t":{"$date":"2021-09-30T11:58:29.793+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T11:58:29.795+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974300,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:29.795+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:29.795+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974300,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:29.795+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974300,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:29.795+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956157}}
{"t":{"$date":"2021-09-30T11:58:29.795+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}




















session.commitTransaction();
对应日志如下：
{"t":{"$date":"2021-09-30T11:58:42.687+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974300,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:42.687+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:42.687+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974320,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:42.687+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974300,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:42.687+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956348}}
{"t":{"$date":"2021-09-30T11:58:42.687+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"commitTransaction":1.0,"txnNumber":0,"writeConcern":{"w":"majority"},"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974320,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"autocommit":false,"stmtId":2,"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"commitTransaction"}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"TXN",      "id":20507,   "ctx":"conn24","msg":"Received commitTransaction","attr":{"txnNumber":0,"sessionId":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}}}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":22415,   "ctx":"conn24","msg":"WT set timestamp of future write operations to {timestamp}","attr":{"timestamp":{"$timestamp":{"t":1632974323,"i":1}}}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D4", "c":"STORAGE",  "id":22403,   "ctx":"conn24","msg":"inserting record with timestamp {ts}","attr":{"ts":{"$timestamp":{"t":1632974323,"i":1}}}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":22415,   "ctx":"conn24","msg":"WT set timestamp of future write operations to {timestamp}","attr":{"timestamp":{"$timestamp":{"t":1632974323,"i":1}}}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":122416,  "ctx":"conn24","msg":"yang test .......WiredTigerRecordStore::_insertRecords ","attr":{" _uri:":"table:local/collection/16--8885603098536360841"," key:":{"RecordId":7013571312492740609}," value:":{"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}},"txnNumber":0,"op":"c","ns":"admin.$cmd","o":{"applyOps":[{"op":"i","ns":"mydb11.foo","ui":{"$uuid":"c0fa5bd4-f2e2-43e1-a45c-eb5a2ca28026"},"o":{"_id":{"$oid":"615535e5b670ae379eff3601"},"abc":221.0}},{"op":"i","ns":"mydb22.bar","ui":{"$uuid":"b6717ddc-8832-40d5-bdaa-5a3504686f10"},"o":{"_id":{"$oid":"615535e5b670ae379eff3602"},"xyz":92299.0}}]},"ts":{"$timestamp":{"t":1632974323,"i":1}},"t":53,"wall":{"$date":"2021-09-30T03:58:43.021Z"},"v":2,"prevOpTime":{"ts":{"$timestamp":{"t":0,"i":0}},"t":-1}}}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin x"}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin xx"}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":122418,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin"}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":122416,  "ctx":"conn24","msg":"yang test .......WiredTigerRecordStore::_insertRecords ","attr":{" _uri:":"table:config/collection/45--8885603098536360841"," key:":{"RecordId":76}," value:":{"_id":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}},"txnNum":0,"lastWriteOpTime":{"ts":{"$timestamp":{"t":1632974323,"i":1}},"t":53},"lastWriteDate":{"$date":"2021-09-30T03:58:43.021Z"},"state":"committed"}}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D2", "c":"STORAGE",  "id":22423,   "ctx":"conn24","msg":"WiredTigerSizeStorer::store Marking {uri} dirty, numRecords: {sizeInfo_numRecords_load}, dataSize: {sizeInfo_dataSize_load}, use_count: {entry_use_count}","attr":{"uri":"table:config/collection/45--8885603098536360841","sizeInfo_numRecords_load":76,"sizeInfo_dataSize_load":12931,"entry_use_count":3}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":122419,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments begin 2"}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":122428,  "ctx":"conn24","msg":"yang test .......CollectionImpl::insertDocuments end"}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D1", "c":"STORAGE",  "id":22411,   "ctx":"conn24","msg":"Slow WT transaction. Lifetime of SnapshotId {getSnapshotId_toNumber} was {transactionTime}ms","attr":{"getSnapshotId_toNumber":1953247,"transactionTime":13242}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":22412,   "ctx":"conn24","msg":"WT commit_transaction","attr":{"snapshotId":1953247}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-30T11:58:43.021+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onRollback<mongo::repl::LocalOplogInfo::getNextOpTimes(mongo::OperationContext*, unsigned long)::{lambda()#2}>(mongo::repl::LocalOplogInfo::getNextOpTimes(mongo::OperationContext*, unsigned long)::{lambda()#2})::OnRollbackChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::OplogStones::InsertChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocumentsForOplog(mongo::OperationContext*, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::CollectionImpl::insertDocumentsForOplog(mongo::OperationContext*, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::repl::_logOpsInner(mongo::OperationContext*, mongo::NamespaceString const&, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&, mongo::Collection*, mongo::repl::OpTime, mongo::Date_t)::{lambda(boost::optional<mongo::Timestamp>)#3}>(mongo::repl::_logOpsInner(mongo::OperationContext*, mongo::NamespaceString const&, std::vector<mongo::Record, std::allocator<mongo::Record> >*, std::vector<mongo::Timestamp, std::allocator<mongo::Timestamp> > const&, mongo::Collection*, mongo::repl::OpTime, mongo::Date_t)::{lambda(boost::optional<mongo::Timestamp>)#3})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::NumRecordsChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::WiredTigerRecordStore::DataSizeChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5}>(mongo::CollectionImpl::insertDocuments(mongo::OperationContext*, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, __gnu_cxx::__normal_iterator<mongo::InsertStatement const*, std::vector<mongo::InsertStatement, std::allocator<mongo::InsertStatement> > >, mongo::OpDebug*, bool)::{lambda(boost::optional<mongo::Timestamp>)#5})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22244,   "ctx":"conn24","msg":"CUSTOM COMMIT {demangleName_typeid_change}","attr":{"demangleName_typeid_change":"mongo::RecoveryUnit::onCommit<mongo::TransactionParticipant::Participant::_registerUpdateCacheOnCommit(mongo::OperationContext*, std::vector<int, std::allocator<int> >, mongo::repl::OpTime const&)::{lambda(boost::optional<mongo::Timestamp>)#1}>(mongo::TransactionParticipant::Participant::_registerUpdateCacheOnCommit(mongo::OperationContext*, std::vector<int, std::allocator<int> >, mongo::repl::OpTime const&)::{lambda(boost::optional<mongo::Timestamp>)#1})::OnCommitChange"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"I",  "c":"TXN",      "id":51802,   "ctx":"conn24","msg":"transaction","attr":{"parameters":{"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"},"uid":{"$binary":{"base64":"Y5mrDaxi8gv8RmdTsQ+1j7fmkr7JUsabhNmXAheU0fg=","subType":"0"}}},"txnNumber":0,"autocommit":false,"readConcern":{"level":"local"}},"readTimestamp":"Timestamp(0, 0)","ninserted":2,"keysInserted":2,"terminationCause":"committed","timeActiveMicros":10132,"timeInactiveMicros":13233057,"numYields":0,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":4}},"Global":{"acquireCount":{"r":1,"w":2}},"Database":{"acquireCount":{"w":4}},"Collection":{"acquireCount":{"w":4}},"Mutex":{"acquireCount":{"r":4}}},"storage":{"data":{"bytesRead":782,"timeReadingMicros":1214}},"wasPrepared":false,"durationMillis":13243}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D2", "c":"REPL",     "id":22549,   "ctx":"conn24","msg":"Waiting for write concern. OpTime: {replOpTime}, write concern: {writeConcern}","attr":{"replOpTime":{"ts":{"$timestamp":{"t":1632974323,"i":1}},"t":53},"writeConcern":{"w":"majority","wtimeout":0}}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22414,   "ctx":"conn24","msg":"WT begin_transaction","attr":{"snapshotId":1953249,"readSource":"kNoTimestamp"}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D3", "c":"STORAGE",  "id":22413,   "ctx":"conn24","msg":"WT rollback_transaction","attr":{"snapshotId":1953250}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D2", "c":"STORAGE",  "id":22371,   "ctx":"conn24","msg":"Operation is waiting for an entry to become visible in the oplog.","attr":{"awaitedOplogEntryTimestamp":{"$timestamp":{"t":1632974323,"i":1}},"currentLatestVisibleOplogEntryTimestamp":{"$timestamp":{"t":1632974320,"i":1}}}}
{"t":{"$date":"2021-09-30T11:58:43.022+08:00"},"s":"D2", "c":"STORAGE",  "id":22371,   "ctx":"conn24","msg":"Operation is waiting for an entry to become visible in the oplog.","attr":{"awaitedOplogEntryTimestamp":{"$timestamp":{"t":1632974323,"i":1}},"currentLatestVisibleOplogEntryTimestamp":{"$timestamp":{"t":1632974320,"i":1}}}}
{"t":{"$date":"2021-09-30T11:58:43.025+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974323,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:43.025+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"commitTransaction":1.0,"txnNumber":0,"writeConcern":{"w":"majority"},"lsid":{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}},"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974320,"i":1}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"autocommit":false,"stmtId":2,"$db":"admin"},"numYields":0,"reslen":163,"locks":{"ReplicationStateTransition":{"acquireCount":{"w":5}},"Global":{"acquireCount":{"r":2,"w":2}},"Database":{"acquireCount":{"w":4}},"Collection":{"acquireCount":{"w":4}},"Mutex":{"acquireCount":{"r":4}}},"flowControl":{"acquireCount":1,"timeAcquiringMicros":1},"readConcern":{"level":"local"},"writeConcern":{"w":"majority","wtimeout":0},"storage":{},"protocol":"op_msg","durationMillis":4}}
{"t":{"$date":"2021-09-30T11:58:43.025+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956354}}
{"t":{"$date":"2021-09-30T11:58:43.025+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T11:58:43.026+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974323,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:43.026+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:43.026+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974323,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:43.026+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974323,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:43.027+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956356}}
{"t":{"$date":"2021-09-30T11:58:43.027+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}















session.endSession();
对应日志如下：

{"t":{"$date":"2021-09-30T11:58:54.551+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"endSessions":[{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}}],"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:54.551+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974323,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:54.551+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"endSessions":[{"id":{"$uuid":"231b1fe8-6961-4589-a60f-f9a5c90b0afc"}}],"$db":"admin"},"numYields":0,"reslen":163,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:54.551+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956526}}
{"t":{"$date":"2021-09-30T11:58:54.551+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}
{"t":{"$date":"2021-09-30T11:58:54.551+08:00"},"s":"D2", "c":"COMMAND",  "id":21965,   "ctx":"conn24","msg":"About to run the command","attr":{"db":"admin","commandArgs":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974323,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"}}}
{"t":{"$date":"2021-09-30T11:58:54.552+08:00"},"s":"D2", "c":"COMMAND",  "id":21961,   "ctx":"conn24","msg":"Admin only command","attr":{"command":"replSetGetStatus"}}
{"t":{"$date":"2021-09-30T11:58:54.552+08:00"},"s":"D5", "c":"COMMAND",  "id":21957,   "ctx":"conn24","msg":"Appending operationTime to cmd response for authorized client: {operationTime}","attr":{"operationTime":{"ts":{"$timestamp":{"t":1632974323,"i":1}}}}}
{"t":{"$date":"2021-09-30T11:58:54.552+08:00"},"s":"I",  "c":"COMMAND",  "id":51803,   "ctx":"conn24","msg":"Slow query","attr":{"type":"command","ns":"admin.$cmd","appName":"MongoDB Shell","command":{"replSetGetStatus":1.0,"forShell":1.0,"$clusterTime":{"clusterTime":{"$timestamp":{"t":1632974323,"i":2}},"signature":{"hash":{"$binary":{"base64":"AAAAAAAAAAAAAAAAAAAAAAAAAAA=","subType":"0"}},"keyId":0}},"$db":"admin"},"numYields":0,"reslen":1503,"locks":{},"protocol":"op_msg","durationMillis":0}}
{"t":{"$date":"2021-09-30T11:58:54.552+08:00"},"s":"D1", "c":"QUERY",    "id":22790,   "ctx":"conn24","msg":"Received interrupt request for unknown op","attr":{"opId":956527}}
{"t":{"$date":"2021-09-30T11:58:54.552+08:00"},"s":"D2", "c":"QUERY",    "id":22783,   "ctx":"conn24","msg":"Ops known during interrupt","attr":{"ops":[]}}














